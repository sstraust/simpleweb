<h1>"Argument list too long" error when passing a find output as arguments</h1>
<p>I have some 5 million text files under a directory - all of the same format (nothing special, just plain text files with some integers in each line). I would like to compute the maximum and minimum line count amongst all these files, along with its two filenames (the one for max and another for min).</p>
<p>I started out by trying to write out all the line count like so (and then workout how to find the min and max from this list):</p>
<pre><code>wc -l `find /some/data/dir/with/text/files/ -type f` &gt; report.txt
</code></pre>
<p>but this throws me an error:</p>
<blockquote>
<p>bash: /usr/bin/wc: Argument list too long</p>
</blockquote>
<p>Perhaps there is a better way to go about this?</p>
<h2>1 Answer</h2>
<p>There is a <a href="https://stackoverflow.com/a/4185165/4375327">limit</a> to the argument list length. Since you have several millions files passed to wc, the command certainly crossed this line.</p>
<p>Better invoke <code>find -exec COMMAND</code> instead:</p>
<pre><code>find /some/data/dir/with/text/files/ -type f -exec wc -l {} + &gt; report.txt
</code></pre>
<p>Here, each found file <code>find</code> will be appended to the argument list of the command following <code>-exec</code> in place of <code>{}</code>. Before the argument length is reached, the command is run and the remaining found files will be processed in a new run of the command the same way, until the whole list is done.</p>
<p>See <a href="https://linux.die.net/man/1/find" rel="nofollow noreferrer">man page</a> of <code>find</code> for more details.</p>
<hr>
<p><em>Thanks to <a href="https://stackoverflow.com/users/14122/charles-duffy">Charles Duffy</a> for the improvements of this answer.</em></p>
<h2>Your Answer</h2>
<form id="post-form" action="/questions/64110022/answer/submit" method="post" class="js-add-answer-component post-form">
    <input type="hidden" id="post-id" value="64110022">
    <input type="hidden" id="qualityBanWarningShown" name="qualityBanWarningShown" value="false">
    <input type="hidden" name="referrer" value="">
    <h2>Your Answer</h2>
    <div id="post-editor" class="post-editor js-post-editor d-flex fd-column g4">
        <div class="ps-relative">
            <div class="wmd-container mb8">
                <div id="wmd-button-bar" class="wmd-button-bar btr-sm"></div>
                <div class="ai-content-policy-notice js-ai-policy-notice fc-black p8 bl br bc-black-300 d-none" aria-hidden="true">
                    <div class="d-flex jc-space-between ac-center gsx gs2">
                        <p class="flex--item as-center"><b>Reminder:</b> Answers generated by artificial intelligence tools are not allowed on Stack Overflow. <a href="/help/gen-ai-policy">Learn more</a></p>
                        <button class="flex--item js-dismiss-ai-banner s-btn s-btn__sm s-btn__icon fc-black"></button>
                    </div>
                </div>
                <input type="hidden" name="AIPolicyNoticeShown" value="true">
                <div class="js-stacks-validation">
                    <div class="ps-relative">
                        <textarea id="wmd-input" name="post-text" class="wmd-input s-input bar0 js-post-body-field" data-editor-type="wmd" data-post-type-id="2" cols="92" rows="15" aria-labelledby="your-answer-header" tabindex="101" data-min-length=""></textarea>
                    </div>
                    <div class="s-input-message mt4 d-none js-stacks-validation-message"></div>
                </div>
            </div>
        </div>
        <aside class="d-flex ai-start jc-space-between js-answer-help s-notice s-notice__warning pb0 pr4 pt4 mb8 d-none" role="status" aria-hidden="true">
            <div class="flex--item pt8">
                <p>Thanks for contributing an answer to Stack Overflow!</p>
                <ul>
                    <li>Please be sure to <em>answer the question</em>. Provide details and share your research!</li>
                </ul>
                <p>But <em>avoid</em> …</p>
                <ul>
                    <li>Asking for help, clarification, or responding to other answers.</li>
                    <li>Making statements based on opinion; back them up with references or personal experience.</li>
                </ul>
                <p>To learn more, see our <a href="/help/how-to-answer">tips on writing great answers</a>.</p>
            </div>
            <button class="flex--item js-answer-help-close-btn s-btn s-btn__muted fc-black-600"></button>
        </aside>
        <div>
            <div id="draft-saved" class="fc-success h24" style="display:none;">Draft saved</div>
            <div id="draft-discarded" class="fc-error h24" style="display:none;">Draft discarded</div>
        </div>
        <div id="wmd-preview" class="s-prose mb16 wmd-preview js-wmd-preview"></div>
        <div></div>
        <div class="edit-block">
            <input id="fkey" name="fkey" type="hidden" value="a52bbdc8193dd840d278aa9b870f9e69f2931d38c84ae6b7df2f580711567d5d">
            <input id="author" name="author" type="text">
        </div>
    </div>
    <div class="ps-relative">
        <div class="form-item new-post-login p0 my16">
            <div class="d-flex gs16 md:fd-column new-login-form">
                <div class="d-flex fd-column w50 md:w-auto gsy gs8 jc-space-between new-login-left">
                    <h3>Sign up or <a id="login-link" href="/users/login?ssrc=question_page&amp;returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f64110022%2fargument-list-too-long-error-when-passing-a-find-output-as-arguments%23new-answer">log in</a></h3>
                    <div class="flex--item s-btn s-btn__muted s-btn__outlined s-btn__icon google-login" data-ga="[&quot;sign up&quot;,&quot;Sign Up Started - Google&quot;,&quot;New Post&quot;,null,null]">
                        Sign up using Google
                    </div>
                    <div class="flex--item s-btn s-btn__muted s-btn__outlined s-btn__icon stackexchange-login" data-ga="[&quot;sign up&quot;,&quot;Sign Up Navigation&quot;,&quot;New Post&quot;,null,null]">
                        Sign up using Email and Password
                    </div>
                </div>
                <input type="hidden" name="use-facebook" class="use-facebook" value="false">
                <input type="hidden" name="use-google" class="use-google" value="false">
                <button type="button" class="d-none js-submit-openid">Submit</button>
                <div class="d-flex gsy gs8 fd-column w50 md:w-auto new-login-right form-item p0">
                    <h3>Post as a guest</h3>
                    <div class="flex--item">
                        <div class="d-flex gs4 gsy fd-column">
                            <label class="s-label" for="display-name">Name</label>
                            <div class="d-flex ps-relative">
                                <input class="s-input" id="display-name" name="display-name" maxlength="30" type="text" value="" tabindex="105" placeholder="">
                            </div>
                        </div>
                    </div>
                    <div class="flex--item">
                        <div class="d-flex gs4 gsy fd-column">
                            <div class="flex--item">
                                <div class="d-flex gs2 gsy fd-column">
                                    <label class="flex--item s-label" for="m-address">Email</label>
                                    <p class="flex--item s-description">Required, but never shown</p>
                                </div>
                            </div>
                            <div class="d-flex ps-relative">
                                <input class="s-input js-post-email-field" id="m-address" name="m-address" type="text" value="" size="40" tabindex="106" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <noscript>
            <h3>Post as a guest</h3>
            <div class="flex--item">
                <div class="d-flex gs4 gsy fd-column">
                    <label class="s-label" for="display-name">Name</label>
                    <div class="d-flex ps-relative">
                        <input class="s-input" id="display-name" name="display-name" maxlength="30" type="text" value="" tabindex="105" placeholder="" />
                    </div>
                </div>
            </div>
            <div class="flex--item">
                <div class="d-flex gs4 gsy fd-column">
                    <div class="flex--item">
                        <div class="d-flex gs2 gsy fd-column">
                            <label class="flex--item s-label" for="m-address">Email</label>
                            <p class="flex--item s-description">Required, but never shown</p>
                        </div>
                    </div>
                    <div class="d-flex ps-relative">
                        <input class="s-input js-post-email-field" id="m-address" name="m-address" type="text" value="" size="40" tabindex="106" placeholder="" />
                    </div>
                </div>
            </div>
        </noscript>
    </div>
    <div class="form-submit clear-both d-flex gsx gs4">
        <button id="submit-button" class="flex--item s-btn s-btn__filled s-btn__icon" type="submit" tabindex="120" autocomplete="off">
            Post Your Answer
        </button>
        <button class="flex--item s-btn s-btn__danger discard-answer dno">
            Discard
        </button>
        <p class="privacy-policy-agreement">
            By clicking “Post Your Answer”, you agree to our <a href="https://stackoverflow.com/legal/terms-of-service/public" name="tos" target="_blank" class="-link">terms of service</a> and acknowledge you have read our <a href="https://stackoverflow.com/legal/privacy-policy" name="privacy" target="_blank" class="-link">privacy policy</a>.<input type="hidden" name="legalLinksShown" value="1">
        </p>
    </div>
    <div class="js-general-error general-error clear-both d-none" aria-live="polite"></div>
</form>
<h2>Not the answer you're looking for? Browse other questions tagged <a href="/questions/tagged/python">python</a> <a href="/questions/tagged/bash">bash</a> <a href="/questions/tagged/wc">wc</a> or <a href="/questions/ask">ask your own question</a>.</h2>